"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const O=1e3,l=60,c=60,f=24,d=365,y=O,T=y*l,M=T*c,b=M*f,H=b*d,P=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=["years","days","hours","minutes","seconds"],N=n=>n>=10?`${n}`:`0${n}`,u=n=>Math.floor(Math.abs(n)),m="[TimezZ]",p="https://github.com/BrooonS/timezz",w=n=>{if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){const e=n.match(P);if(e){const s=e[2]-1||0,o=(e[7]||"0").substring(0,3);return new Date(e[1],s,e[3]||1,e[4]||0,e[5]||0,e[6]||0,o)}}if(new Date(n).toString()==="Invalid Date")throw new Error(`${m}: Date is invalid. Check documentation for more info. ${p}`);return new Date(n)};class E{constructor(t,e){this.pause=!1,this.stopOnZero=!0,this.isDestroyed=!1,this.HTMLParts=h.reduce((s,o)=>({...s,[o]:null}),{}),this.timeout=null,this.checkFields=s=>{const o=(i,r)=>{s[i]!==void 0&&r.length&&console.warn(`${m}:`,`Parameter '${i}' should be ${r.length>1?"one of the types":"the type"}: ${r.join(", ")}.`,this.element)};typeof s.pause!="boolean"&&o("pause",["boolean"]),typeof s.stopOnZero!="boolean"&&o("stopOnZero",["boolean"]),typeof s.beforeCreate!="function"&&o("beforeCreate",["function"]),typeof s.beforeUpdate!="function"&&o("beforeUpdate",["function"]),typeof s.update!="function"&&o("update",["function"])},this.element=t,this.checkFields(e),this.date=w(e.date),this.pause=e.pause||!1,this.stopOnZero=typeof e.stopOnZero=="boolean"?e.stopOnZero:!0,this.beforeCreate=e.beforeCreate,this.beforeUpdate=e.beforeUpdate,this.update=e.update,typeof this.beforeCreate=="function"&&this.beforeCreate(),this.init()}init(){this.isDestroyed=!1,this.updateHTMLParts();const t=new Date(this.date).getTime(),e=new Date().getTime(),s=t-e,o=this.stopOnZero?s<0:!1,r={...o?h.reduce((a,D)=>({...a,[D]:0}),{}):this.calculate(s),distance:Math.abs(s),isTimeOver:s<=0};typeof this.beforeUpdate=="function"&&this.beforeUpdate(),(!o&&!this.pause||!this.timeout)&&this.setHTML(r),typeof this.update=="function"&&this.update(r),this.timeout||(this.timeout=setInterval(this.init.bind(this),y))}calculate(t){const e={years:null,days:null,hours:null,minutes:null,seconds:null},s=u(t%T/y),o=u(t%M/T),i=u(t%b/M),r=u(t%H/b),a=u(t/H);return this.HTMLParts.seconds&&(e.seconds=s),this.HTMLParts.minutes?e.minutes=o:e.seconds=(e.days||s)+o*l,this.HTMLParts.hours?e.hours=i:this.HTMLParts.minutes?e.minutes=(e.minutes||o)+i*c:this.HTMLParts.seconds&&(e.seconds=(e.seconds||s)+i*c*l),this.HTMLParts.days?e.days=r:this.HTMLParts.hours?e.hours=(e.hours||i)+r*f:this.HTMLParts.minutes?e.minutes=(e.minutes||o)+r*f*c:this.HTMLParts.seconds&&(e.seconds=(e.seconds||s)+r*f*c*l),this.HTMLParts.years?e.years=a:this.HTMLParts.days?e.days=(e.days||r)+a*d:this.HTMLParts.hours?e.hours=(e.hours||i)+a*d*f:this.HTMLParts.minutes?e.minutes=(e.minutes||o)+a*d*f*c:this.HTMLParts.seconds&&(e.seconds=(e.seconds||s)+a*d*f*c*l),e}updateHTMLParts(){h.forEach(t=>{const e=this.element.querySelector(`[data-${t}]`);e&&(this.HTMLParts[t]=e)})}setHTML(t){h.forEach(e=>{if(!this.element)throw new Error(`${m}: Element isn't passed. Check documentation for more info. ${p}`);const s=t[e];if(s===null)return;const o=this.element.querySelector(`[data-${e}]`),i=N(s);o&&o.innerHTML!==i&&(o.innerHTML=i)})}destroy(){this.timeout&&(clearInterval(this.timeout),this.timeout=null),h.forEach(t=>{if(!this.element)return;const e=this.element.querySelector(`[data-${t}]`);e&&(e.innerHTML="")}),this.isDestroyed=!0}}const L=(n,t)=>{if(!n||!(n instanceof Element)||!(n instanceof HTMLElement))throw new Error(`${m}: Element isn't passed. Check documentation for more info. ${p}`);if(!t||typeof t!="object"||typeof t.date!="string"&&typeof t.date!="number"&&!(t.date instanceof Date))throw new Error(`${m}: Date is invalid. Check documentation for more info. ${p}`);return new E(n,t)};L.prototype=E.prototype;exports.Timezz=E;exports.timezz=L;
